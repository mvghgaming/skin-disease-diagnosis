A. B·ªánh nh√¢n 1 (Kh√¥ng ƒë·ªß th√¥ng tin chu·∫©n ƒëo√°n b·ªánh) :
-- 1. T·∫°o b·ªánh nh√¢n
INSERT INTO PATIENT_INFO (patient_id, age, sex) 
VALUES (1, 35, 'Nam');

-- 2. T·∫°o tri·ªáu ch·ª©ng da (C√≥ m·∫£ng phong + m·∫•t c·∫£m gi√°c)
INSERT INTO SKIN_LESION_MORPHOLOGY (patient_id, leprosy_patch, sensory_loss_on_lesion, primary_lesion, nodule_or_abscess)
VALUES (1, TRUE, TRUE, 'c·ªß lao', FALSE);

-- 3. T·∫°o tri·ªáu ch·ª©ng th·∫ßn kinh (M·∫•t c·∫£m gi√°c ƒëau)
INSERT INTO SYSTEMIC_AND_NEURO_SIGNS (patient_id, temperature_or_pain_sensation_loss_on_lesion, enlarged_painful_nerves)
VALUES (1, TRUE, FALSE);

-- 4. T·∫°o k·∫øt qu·∫£ x√©t nghi·ªám (AFB √¢m t√≠nh -> ƒë·ªÉ test ra th·ªÉ PB)
INSERT INTO LABORATORY_ASSESSMENT (patient_id, smear_afb_leprosy)
VALUES (1, FALSE);

-- 5. T·∫°o ƒë√°nh gi√° m·ª©c ƒë·ªô (T·ªïng 3 t·ªïn th∆∞∆°ng)
INSERT INTO SEVERITY_ASSESSMENT (patient_id, total_lesion_count)
VALUES (1, 3);

-- 6. T·∫°o ph√¢n b·ªë (Ranh gi·ªõi r√µ -> Th·ªÉ C·ªß TT)
INSERT INTO LESION_DISTRIBUTION (patient_id, border_clarity)
VALUES (1, 'R√µ');

-- B·ªï sung tri·ªáu ch·ª©ng ƒë·ªÉ th·ªèa m√£n lu·∫≠t LEP_1 (Ch·∫©n ƒëo√°n x√°c ƒë·ªãnh)
UPDATE SKIN_LESION_MORPHOLOGY 
SET leprosy_patch = TRUE, sensory_loss_on_lesion = TRUE 
WHERE patient_id = 1;


-- ====================================================
-- TEST CASE 2: B·ªÜNH NH√ÇN TR·ª®NG C√Å TH√îNG TH∆Ø·ªúNG (NH·∫∏)
-- ====================================================

-- 1. T·∫°o th√¥ng tin b·ªánh nh√¢n (ID = 2)
INSERT INTO PATIENT_INFO (patient_id, age, sex, occupation) 
VALUES (2, 18, 'N·ªØ', 'Sinh vi√™n');

-- 2. T·∫°o h√¨nh th√°i t·ªïn th∆∞∆°ng
-- ƒêi·ªÅu ki·ªán ACNE_1: C√≥ m·ª•n m·ªß + C√≥ nh√¢n m·ª•n + Kh√¥ng s·∫πo
INSERT INTO SKIN_LESION_MORPHOLOGY (patient_id, pustule, comedones_present, scar, nodule_or_abscess)
VALUES (2, TRUE, TRUE, FALSE, FALSE);

-- 3. T·∫°o ph√¢n b·ªë t·ªïn th∆∞∆°ng
-- ƒêi·ªÅu ki·ªán ACNE_1: V·ªã tr√≠ ·ªü M·∫∑t
INSERT INTO LESION_DISTRIBUTION (patient_id, main_location)
VALUES (2, 'M·∫∑t');

-- 4. T·∫°o ƒë√°nh gi√° m·ª©c ƒë·ªô
-- ƒêi·ªÅu ki·ªán ACNE_10: M·ª©c ƒë·ªô Nh·∫π
INSERT INTO SEVERITY_ASSESSMENT (patient_id, overall_severity)
VALUES (2, 'Nh·∫π');

-- 5. C√°c b·∫£ng kh√°c (Insert d·ªØ li·ªáu tr·ªëng/m·∫∑c ƒë·ªãnh ƒë·ªÉ tr√°nh l·ªói Foreign Key n·∫øu c·∫ßn)
INSERT INTO SYSTEMIC_AND_NEURO_SIGNS (patient_id, fever) VALUES (2, FALSE);
INSERT INTO LABORATORY_ASSESSMENT (patient_id, inflammatory_markers) VALUES (2, 'B√¨nh th∆∞·ªùng');
-- X√≥a k·∫øt qu·∫£ ch·∫©n ƒëo√°n c≈© (n·∫øu c√≥) ƒë·ªÉ ch·∫°y l·∫°i t·ª´ ƒë·∫ßu
DELETE FROM DIAGNOSIS_ASSESSMENT WHERE patient_id = 2;


-- ====================================================
-- TEST CASE 3: CH·ªêC L√ÇY (IMPETIGO) - KHU TR√ö
-- ====================================================
-- 1. X√≥a d·ªØ li·ªáu c≈© c·ªßa ID 3 (n·∫øu c√≥)
DELETE FROM PATIENT_INFO WHERE patient_id = 3;

-- 2. Th√¥ng tin b·ªánh nh√¢n
INSERT INTO PATIENT_INFO (patient_id, age, sex) VALUES (3, 6, 'Nam');

-- 3. H√¨nh th√°i t·ªïn th∆∞∆°ng (B·ªçng n∆∞·ªõc + V·∫£y v√†ng n√¢u)
INSERT INTO SKIN_LESION_MORPHOLOGY (patient_id, vesicle_or_bulla, crust_presence, crust_color)
VALUES (3, TRUE, TRUE, 'V√†ng n√¢u');

-- 4. Ph√¢n b·ªë (·ªû M·∫∑t - ƒêi·ªÉn h√¨nh)
INSERT INTO LESION_DISTRIBUTION (patient_id, main_location)
VALUES (3, 'M·∫∑t');

-- 5. ƒê√°nh gi√° m·ª©c ƒë·ªô (Khu tr√∫)
INSERT INTO SEVERITY_ASSESSMENT (patient_id, extent_of_lesions)
VALUES (3, 'Khu tr√∫');

-- 6. D·ªØ li·ªáu ph·ª• (Kh√¥ng s·ªët)
INSERT INTO SYSTEMIC_AND_NEURO_SIGNS (patient_id, fever) VALUES (3, FALSE);

üëâ K·ª≥ v·ªçng: Ch·∫©n ƒëo√°n "Ch·ªëc ƒëi·ªÉn h√¨nh", ƒêi·ªÅu tr·ªã "Mupirocin/Fusidic acid".


-- ====================================================
-- TEST CASE 4: SSSS (H·ªòI CH·ª®NG BONG V·∫¢Y DA DO T·ª§ C·∫¶U)
-- ====================================================
DELETE FROM PATIENT_INFO WHERE patient_id = 4;

-- 1. Th√¥ng tin b·ªánh nh√¢n (< 5 tu·ªïi)
INSERT INTO PATIENT_INFO (patient_id, age, sex) VALUES (4, 2, 'N·ªØ');

-- 2. H√¨nh th√°i t·ªïn th∆∞∆°ng (Bong ƒë·ªè da + B·ªçng n∆∞·ªõc + KH√îNG v·∫£y ti·∫øt)
INSERT INTO SKIN_LESION_MORPHOLOGY (patient_id, exfoliative_erythema, vesicle_or_bulla, crust_presence)
VALUES (4, TRUE, TRUE, FALSE);

-- 3. Tri·ªáu ch·ª©ng to√†n th√¢n (C√≥ bi·ªÉu hi·ªán to√†n th√¢n)
INSERT INTO SEVERITY_ASSESSMENT (patient_id, systemic_involvement, overall_severity)
VALUES (4, TRUE, 'N·∫∑ng');

-- 4. Ch·∫©n ƒëo√°n ph√¢n bi·ªát (ƒê·ªÉ tr√°nh nh·∫ßm v·ªõi Ch·ªëc)
INSERT INTO DIAGNOSIS_ASSESSMENT (patient_id, differential_list) VALUES (4, NULL);

üëâ K·ª≥ v·ªçng: Ch·∫©n ƒëo√°n "SSSS", C·∫£nh b√°o bi·∫øn ch·ª©ng "Nhi·ªÖm khu·∫©n huy·∫øt...", ƒêi·ªÅu tr·ªã "Amoxicillin/Clavulanate".


-- ====================================================
-- TEST CASE 5: NH·ªåT V√ôNG M·∫∂T (N·∫∂NG)
-- ====================================================
DELETE FROM PATIENT_INFO WHERE patient_id = 5;

INSERT INTO PATIENT_INFO (patient_id, age, sex) VALUES (5, 25, 'Nam');

-- 1. H√¨nh th√°i (N·ªët/√Åp xe + M·ª•n m·ªß)
INSERT INTO SKIN_LESION_MORPHOLOGY (patient_id, nodule_or_abscess, pustule)
VALUES (5, TRUE, TRUE);

-- 2. Tri·ªáu ch·ª©ng c∆° nƒÉng (ƒêau)
INSERT INTO SYSTEMIC_AND_NEURO_SIGNS (patient_id, pain) VALUES (5, TRUE);

-- 3. Ph√¢n b·ªë (V√πng nang l√¥ng + V·ªã tr√≠ M·∫∑t)
INSERT INTO LESION_DISTRIBUTION (patient_id, follicular_area, main_location)
VALUES (5, TRUE, 'M·∫∑t');

-- 4. Kh·ªüi t·∫°o ƒë√°nh gi√° m·ª©c ƒë·ªô (ƒê·ªÉ tr·ªëng ƒë·ªÉ Rule Engine t·ª± ƒëi·ªÅn "N·∫∑ng" v√†o)
INSERT INTO SEVERITY_ASSESSMENT (patient_id, overall_severity) VALUES (5, NULL);

üëâ K·ª≥ v·ªçng: Ch·∫©n ƒëo√°n "Nh·ªçt", ƒê√°nh gi√° m·ª©c ƒë·ªô "N·∫∑ng" (do ·ªü m·∫∑t), ƒêi·ªÅu tr·ªã kh√°ng sinh u·ªëng.


-- ====================================================
-- TEST CASE 6: VI√äM NANG L√îNG (TR√äN C∆† ƒê·ªäA SUY GI·∫¢M MI·ªÑN D·ªäCH)
-- ====================================================
DELETE FROM PATIENT_INFO WHERE patient_id = 6;

-- 1. B·ªánh nh√¢n c√≥ suy gi·∫£m mi·ªÖn d·ªãch
INSERT INTO PATIENT_INFO (patient_id, age, immunosuppressed) VALUES (6, 30, TRUE);

-- 2. H√¨nh th√°i (M·ª•n m·ªß, kh√¥ng s·∫πo)
INSERT INTO SKIN_LESION_MORPHOLOGY (patient_id, pustule, scar)
VALUES (6, TRUE, FALSE);

-- 3. Tri·ªáu ch·ª©ng (Ng·ª©a nhi·ªÅu)
INSERT INTO SYSTEMIC_AND_NEURO_SIGNS (patient_id, pruritus) VALUES (6, TRUE);

-- 4. Ph√¢n b·ªë (V√πng nang l√¥ng)
INSERT INTO LESION_DISTRIBUTION (patient_id, follicular_area) VALUES (6, TRUE);

-- 5. ƒê√£ c√≥ ch·∫©n ƒëo√°n s∆° b·ªô (ƒê·ªÉ test lu·∫≠t FOL_3)
INSERT INTO DIAGNOSIS_ASSESSMENT (patient_id, main_diagnosis) VALUES (6, 'Vi√™m nang l√¥ng');

üëâ K·ª≥ v·ªçng: Ch·∫©n ƒëo√°n x√°c ƒë·ªãnh "Vi√™m nang l√¥ng tƒÉng b·∫°ch c·∫ßu √°i toan", M·ª©c ƒë·ªô "Trung b√¨nh".


-- ====================================================
-- TEST CASE 7: SƒÇNG LAO (LAO DA TI√äN PH√ÅT)
-- ====================================================
DELETE FROM PATIENT_INFO WHERE patient_id = 7;

INSERT INTO PATIENT_INFO (patient_id, age, HIV_status) VALUES (7, 40, FALSE);

-- 1. H√¨nh th√°i (Lo√©t + Vi√™m m·∫°n t√≠nh + H·∫°ch v√πng)
-- L∆∞u √Ω: chronic_inflammation_features d√πng m·∫£ng TEXT[] trong Postgres
INSERT INTO SKIN_LESION_MORPHOLOGY (patient_id, ulceration, chronic_inflamation_features, lymph_node)
VALUES (7, TRUE, ARRAY['b·ªù nham nh·ªü', '√°p xe l·∫°nh'], 'H·∫°ch v√πng');

-- 2. X√©t nghi·ªám (D∆∞∆°ng t√≠nh)
INSERT INTO LABORATORY_ASSESSMENT (patient_id, bacteria_test, tuberculin_test)
VALUES (7, 'D∆∞∆°ng t√≠nh', 'D∆∞∆°ng t√≠nh');

üëâ K·ª≥ v·ªçng: Ch·∫©n ƒëo√°n "SƒÉng lao (Tuberculosis Chancre)", ƒêi·ªÅu tr·ªã "6 th√°ng" (do HIV √¢m t√≠nh).


-- ====================================================
-- TEST CASE 8: B·ªÜNH √ÅN TH·ª∞C T·∫æ - CH·ªêC (IMPETIGO)
-- B·ªánh nh√¢n: B√πi Xu√¢n Kh·∫£i, 59 th√°ng tu·ªïi
-- ====================================================

-- 1. X√≥a d·ªØ li·ªáu c≈© c·ªßa ID 8 (n·∫øu c√≥)
DELETE FROM PATIENT_INFO WHERE patient_id = 8;

-- 2. Th√¥ng tin b·ªánh nh√¢n
-- 59 th√°ng ~ 5 tu·ªïi. Gi·ªõi t√≠nh Nam.
INSERT INTO PATIENT_INFO (patient_id, age, sex, onset_duration) 
VALUES (8, 5, 'Nam', '3 ng√†y');

-- 3. H√¨nh th√°i t·ªïn th∆∞∆°ng (Quan tr·ªçng nh·∫•t cho Ch·∫©n ƒëo√°n)
-- M√¥ t·∫£: B·ªçng n∆∞·ªõc d·∫≠p tr·ª£t nhanh, v·∫£y m√†u v√†ng n√¢u nh∆∞ m·∫≠t ong
INSERT INTO SKIN_LESION_MORPHOLOGY (
    patient_id, 
    vesicle_or_bulla,   -- B·ªçng n∆∞·ªõc
    crust_presence,     -- ƒê√≥ng v·∫£y
    crust_color,        -- V·∫£y v√†ng n√¢u
    exfoliative_erythema, -- Kh√¥ng ph·∫£i SSSS (kh√¥ng ƒë·ªè da to√†n th√¢n)
    scar                -- Kh√¥ng s·∫πo
)
VALUES (8, TRUE, TRUE, 'V√†ng n√¢u', FALSE, FALSE);

-- 4. Ph√¢n b·ªë t·ªïn th∆∞∆°ng
-- M√¥ t·∫£: R·∫£i r√°c ·ªü tay, ch√¢n, b·ª•ng
INSERT INTO LESION_DISTRIBUTION (patient_id, main_location, number_of_lesions)
VALUES (8, 'Tay', 'Nhi·ªÅu'); 
-- L∆∞u √Ω: Rule CHOC_2 ki·ªÉm tra "Tay" c√≥ trong danh s√°ch ["M·∫∑t", "Tay", "Ch√¢n"] hay kh√¥ng -> S·∫Ω kh·ªõp.

-- 5. Tri·ªáu ch·ª©ng c∆° nƒÉng & To√†n th√¢n
-- M√¥ t·∫£: Ng·ª©a nhi·ªÅu, tr·∫ª hay g√£i. Kh√¥ng s·ªët.
INSERT INTO SYSTEMIC_AND_NEURO_SIGNS (patient_id, pruritus, fever, pain)
VALUES (8, TRUE, FALSE, FALSE);

-- 6. ƒê√°nh gi√° m·ª©c ƒë·ªô
-- M√¥ t·∫£: R·∫£i r√°c tay, ch√¢n, b·ª•ng -> X·∫øp v√†o "Lan r·ªông" ƒë·ªÉ k√≠ch ho·∫°t kh√°ng sinh u·ªëng (theo th·ª±c t·∫ø b√°c sƒ© ƒë√£ k√™ Ceppodocin)
INSERT INTO SEVERITY_ASSESSMENT (patient_id, extent_of_lesions)
VALUES (8, 'Lan r·ªông');

-- 7. Y·∫øu t·ªë nguy c∆°
-- M√¥ t·∫£: Tr·∫ª hay g√£i -> G√¢y tr·∫ßy x∆∞·ªõc (Skin trauma)
INSERT INTO RISK_FACTOR_ASSESSMENT (patient_id, skin_trauma)
VALUES (8, TRUE);


üëâ K·ª≥ v·ªçng Ch·∫©n ƒëo√°n:H·ªá th·ªëng s·∫Ω kh·ªõp lu·∫≠t CHOC_1 (B·ªçng n∆∞·ªõc + V·∫£y v√†ng n√¢u) -> Ch·ªëc ƒëi·ªÉn h√¨nh.



-- ====================================================
-- TEST CASE 9: B·ªÜNH √ÅN TH·ª∞C T·∫æ - TR·ª®NG C√Å (ACNE VULGARIS)
-- B·ªánh nh√¢n: Ph·∫°m Th·ªã Minh T√¢m, 22 tu·ªïi
-- ====================================================

-- 1. X√≥a d·ªØ li·ªáu c≈© c·ªßa ID 9 (n·∫øu c√≥)
DELETE FROM PATIENT_INFO WHERE patient_id = 9;

-- 2. Th√¥ng tin b·ªánh nh√¢n
INSERT INTO PATIENT_INFO (patient_id, age, sex, occupation) 
VALUES (9, 22, 'N·ªØ', 'Sinh vi√™n');

-- 3. H√¨nh th√°i t·ªïn th∆∞∆°ng
-- M√¥ t·∫£: "S·∫©n vi√™m nh·ªè", "m·ª•n m·ªß", "n·ªÅn da l√†nh". 
-- Quan tr·ªçng: ƒê·ªÉ ch·∫©n ƒëo√°n tr·ª©ng c√°, h·ªá th·ªëng c·∫ßn 'comedones_present' = TRUE. 
-- M·∫∑c d√π kh√°m kh√¥ng ghi r√µ "nh√¢n m·ª•n", nh∆∞ng ch·∫©n ƒëo√°n l√† Tr·ª©ng c√° v√† c√≥ k√™ Adapalene (ti√™u nh√¢n m·ª•n), 
-- n√™n ta set comedones_present = TRUE ƒë·ªÉ kh·ªõp logic y khoa.
INSERT INTO SKIN_LESION_MORPHOLOGY (
    patient_id, 
    pustule,            -- C√≥ m·ª•n m·ªß
    comedones_present,  -- C√≥ nh√¢n m·ª•n (·∫©n/ƒë·∫ßu tr·∫Øng/ƒëen)
    nodule_or_abscess,  -- Kh√¥ng c√≥ c·ª•c/nang
    scar,               -- Ch∆∞a s·∫πo r√µ
    ulceration          -- Kh√¥ng lo√©t
)
VALUES (9, TRUE, TRUE, FALSE, FALSE, FALSE);

-- 4. Ph√¢n b·ªë t·ªïn th∆∞∆°ng
-- M√¥ t·∫£: "R·∫£i r√°c hai b√™n m√°", "G√≥c h√†m ph·∫£i" -> V√πng M·∫∑t
INSERT INTO LESION_DISTRIBUTION (patient_id, main_location)
VALUES (9, 'M·∫∑t');

-- 5. ƒê√°nh gi√° m·ª©c ƒë·ªô
-- M√¥ t·∫£: Ch·∫©n ƒëo√°n s∆° b·ªô l√† "M·ª©c ƒë·ªô nh·∫π".
-- ƒê·ªÉ Rule Engine (ACNE_9) t·ª± ƒë·ªông ra "Nh·∫π", ta c·∫ßn nh·∫≠p s·ªë l∆∞·ª£ng t·ªïn th∆∞∆°ng < 20.
INSERT INTO SEVERITY_ASSESSMENT (
    patient_id, 
    overall_severity,               -- G√°n c·ª©ng ho·∫∑c ƒë·ªÉ Rule t√≠nh
    noninflammatory_lesion_count,   -- S·∫©n
    inflammatory_lesion_count,      -- M·ª•n m·ªß
    total_lesion_count
)
VALUES (9, 'Nh·∫π', 10, 5, 15); 

-- 6. Tri·ªáu ch·ª©ng c∆° nƒÉng
-- M√¥ t·∫£: "ƒêau t·∫°i c√°c m·ª•n m·ªß", "Kh√¥ng ng·ª©a"
INSERT INTO SYSTEMIC_AND_NEURO_SIGNS (patient_id, pain, pruritus, fever)
VALUES (9, TRUE, FALSE, FALSE);

-- 7. Y·∫øu t·ªë nguy c∆°
-- M√¥ t·∫£: "Hay n·∫∑n m·ª•n v√† ƒë∆∞a tay l√™n m·∫∑t" -> G√¢y t·ªïn th∆∞∆°ng da (Skin trauma)
INSERT INTO RISK_FACTOR_ASSESSMENT (patient_id, skin_trauma)
VALUES (9, TRUE);

üëâ K·ª≥ v·ªçng: H·ªá th·ªëng kh·ªõp lu·∫≠t ACNE_1 (M·ª•n m·ªß + Nh√¢n m·ª•n + V√πng m·∫∑t) -> Tr·ª©ng c√° th√¥ng th∆∞·ªùng.